From 00216d2777f2aadff017f563fc98a32753ef82e4 Mon Sep 17 00:00:00 2001
From: Jian-Ming Wang <jian.ming.wang@mitaccomputing.com>
Date: Tue, 12 Nov 2024 03:31:32 +0000
Subject: [PATCH 1/1] Fixed build issue by upgrading to C++23.

---
 CMakeLists.txt   | 4 ++--
 src/cpu_info.cpp | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index cafc115..b88835a 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -5,7 +5,7 @@ option (
      "Enable CPU Info logs"
      OFF
 )
-set(CMAKE_CXX_STANDARD 17)
+set(CMAKE_CXX_STANDARD 23)
 set(CMAKE_CXX_STANDARD_REQUIRED ON)

 set(CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)
@@ -54,6 +54,6 @@ install (TARGETS ${PROJECT_NAME} DESTINATION ${CMAKE_INSTALL_BINDIR})
 target_compile_definitions (
     ${PROJECT_NAME} PRIVATE $<$<BOOL:${ENABLE_POWER_CAPPING_LOG}>: -DENABLE_CPU_INFO_LOGS>
 )
-install (FILES ${SERVICE_FILES} DESTINATION /lib/systemd/system/)
+install (FILES ${SERVICE_FILES} DESTINATION /usr/lib/systemd/system/)

 message(STATUS "Toolchain file defaulted to ......'${CMAKE_INATLL_BINDIR}'")
diff --git a/src/cpu_info.cpp b/src/cpu_info.cpp
index fd7e28c..0fde99c 100644
--- a/src/cpu_info.cpp
+++ b/src/cpu_info.cpp
@@ -528,7 +528,7 @@ bool CpuInfo::getNumberOfCpu()
     {
        // Setup pipe for reading and execute to get u-boot environment
        pf = popen(COMMAND_NUM_OF_CPU,"r");
-       if(pf > 0)
+       if(pf != NULL)
        {   // no error
           if (fgets(data, COMMAND_LEN , pf) != NULL)
           {
--
2.34.1
